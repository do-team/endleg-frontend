<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>The Endleg Game</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Styles ---------->
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

    <!-- Latest compiled Bootstrap -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

    <!-- Angular JS -->
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.7/angular.min.js"></script>

    <!-- AWS SDK -->
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.4.8.min.js"></script>


    <!-- FlatUI removed for now !!! -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/flat-ui/2.3.0/css/flat-ui.min.css" rel="stylesheet">
    <link rel="Browser icon" href="favicon.ico">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements. All other JS at the end of file. -->
    <!--[if lt IE 9]>
    <script src="js/vendor/html5shiv.js"></script>
    <script src="js/vendor/respond.min.js"></script>
    <![endif]-->

    <link href="css/styles.css" rel="stylesheet">

    <script src="js/jsbn.js"></script>
    <script src="js/jsbn2.js"></script>
    <script src="js/sjcl.js"></script>
    <script src="js/moment.js"></script>
    <script src="lib/aws/aws-cognito-sdk.min.js"></script>
    <script src="lib/aws/amazon-cognito-identity.min.js"></script>
    <script src="lib/aws/aws-sdk.min.js"></script>

    <script>
        // Amazon Config
        AWS.config.region = 'eu-central-1';                                     // Frankfurt region
        AWS.config.credentials = new AWS.CognitoIdentityCredentials({
        IdentityPoolId: 'eu-central-1:6eaecaa6-58f1-420f-9a97-ac544534c9e6'     // your identity pool id here
        });

        // Cognito Config
        AWSCognito.config.region = 'eu-central-1';
        AWSCognito.config.credentials = new AWS.CognitoIdentityCredentials({
        IdentityPoolId: 'eu-central-1:6eaecaa6-58f1-420f-9a97-ac544534c9e6'    // your identity pool id here
        });

    </script>
</head>

<body>
<div class="container" ng-app="myApp" ng-controller="ctrl" >

    <!-- Nav Bar -->
    <div class="row">
        <div class="col-md-12 col-md-offset-0">
            <nav class="navbar navbar-inverse" role="navigation">
            <!--<nav class="navbar navbar-inverse navbar-embossed" role="navigation">-->
                <div class="container-fluid">
                    <div class="navbar-header">
                        <a class="navbar-brand" href="#">The Endleg Game</a>
                    </div>

                    <ul class="nav navbar-nav">
                        <!--<li class="active"><a href="#">Home</a></li>-->
                        <!--<li><a href="./profile.html">Profile</a></li>-->
                    </ul>

                    <form id="frmLogin" class="navbar-form navbar-right" role="search">

                        <div class="form-group">
                            <input type="text" class="form-control" name="username" placeholder="Username" id="Username">
                        </div>
                        <div class="form-group">
                            <input type="password" class="form-control" name="password" placeholder="Password" id="Password">
                        </div>

                        <button id="loginButton" type="submit" class="btn btn-default">Login</button>
                    </form>
s                </div>

                <div class="collapse navbar-collapse" id="navbar-collapse-01">
                    <ul class="nav navbar-nav navbar-right" ng-show="loggedIn">
                        <li><a href="/">Logout {{user.username}}</a></li>
                    </ul>
                </div><!-- /.navbar-collapse -->

            </nav><!-- /navbar -->
        </div>
    </div>


    <!--REMOVE ME -->

    <div id="testoken"></div>

    <!--REMOVE ME -->

    <!-- Error Messages -->
    <div class="row" ng-show="hasError()" style="margin-bottom: 30px;">
        <div class="panel-danger col-md-4 col-md-offset-4" style="text-align: center; color: red">
            {{errorMessage}}
        </div>
    </div>


    <!-- Login Form -->
    <div class="row" ng-hide="loggedIn">

        <div class="col-md-2 col-lg-2 col-md-offset-1 >
            <div class="col-md-4" style="text-align: center;" >
                <img src="img/rock.png" alt="Endleg" style="width: 140px;">
                <br><br>
                <div>The ENDLEG</div>
            </div>

        <form id="frmSignup">

            <div id="login-form" class="col-md-8 login-form" >

                    <div class="form-group">

                        <input id="signName" type="text" class="form-control login-field"
                               ng-model="name" placeholder="Name"/>
                        <label class="login-field-icon fui-user" for="Name"></label>
                    </div>

                    <div class="form-group">

                        <input id="signEmail" type="text" class="form-control login-field"
                               ng-model="email" placeholder="Email"/>
                        <label class="login-field-icon fui-user" for="Email"></label>
                    </div>


                    <div class="form-group">

                        <input id="signUsername" type="text" class="form-control login-field"
                               ng-model="username" placeholder="Username"/>
                        <label class="login-field-icon fui-user" for="Username"></label>

                    </div>
                    <div class="form-group">
                        <input id="signPassword" type="password" class="form-control login-field"
                               ng-model="password" placeholder="Password" />
                        <label class="login-field-icon fui-lock" for="Password"></label>

                     </div>
                    <div ng-hide="loggingIn">

                        <input id="login-button" type="submit" class="btn btn-primary btn-lg btn-block" value="Signup" />
                               <!--ng-click="login(Username, Password)" />-->
                        <!--<input id="register-button" type="submit" class="btn btn-default btn-lg btn-block" value="Register" />-->
                               <!--&lt;!&ndash;ng-click="register(Username, Password)" />&ndash;&gt;-->
                    </div>
                <div>
                        <br>
                        <!--<a href="https://www.facebook.com/v2.8/dialog/oauth?client_id=927138690721496&redirect_uri=https://www.facebook.com/connect/login_success.html" class="btn btn-primary"><span class="fa fa-facebook"></span> Facebook</a>-->
                        <!--<span class="fa fa-google-plus"> <button type="button" href="/auth/google" class="btn btn-danger">Google</a></button></span>-->
                        <!--<form id="frmSession"><button type="submit" class="btn btn-primary">Get Session</button></form>-->
                        <!--<form id="frmLogout"><button type="submit" class="btn btn-primary">Logout</button></form>-->
                    </div>

                    <div style="text-align: center;">
                        <img ng-show="loggingIn" src="img/loading.gif" class="login-spinner" />
                    </div>

                </div>
            </form>


        </div>

    </div>

        </div>
    </div>

    <!--&lt;!&ndash; Token Message &ndash;&gt;-->
    <!--<div class="row" ng-show="hasToken()" style="margin-bottom: 30px;">-->
        <!--<div class="panel-danger col-md-4 col-md-offset-4" style="text-align: center; color: blue">-->
            <!--{{tokenMessage}}-->
        <!--</div>-->
    <!--</div>-->

    <!--<div class="row" ng-show="loggedIn" >-->
        <!--<div class="col-md-4 col-md-offset-4">-->

            <!--<form ng-submit="deleteDoneItems()">-->
                <!--<input type="submit" ng-show="hasDoneItems()" value="Delete Done Items" class="btn btn-danger btn-lg btn-block" />-->
            <!--</form>-->
        <!--</div>-->
    <!--</div>-->

</div><!-- /.container -->

<!-- Angular JS Controller -->
<script type="text/javascript" src="js/ctrl_lambda.js"></script>

<!-- Style related js -->
<script src="js/vendor/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/flat-ui/2.3.0/js/flat-ui.min.js"></script>

<script src="js/auth.js"></script>

<script>
    $('#frmSignup').submit(function (event) {
        console.log('Creating user')
        var user = {};
        user.name = $('#frmSignup #signName').val();
        user.email = $('#frmSignup #signEmail').val();
        user.username = $('#frmSignup #signUsername').val();
        user.password = $('#frmSignup #signPassword').val();
        registerUser(user);
        confirmUser($('#frmSignup #username').val(), $('#frmSignup #code').val());
        event.preventDefault();
    });

//    $('#frmLogin').submit(function (event) {
//        confirmUser($('#frmLogin #username').val(), $('#frmLogin #code').val());
//        event.preventDefault();
//    });

    $('#frmLogin').submit(function (event) {
        loginUser($('#frmLogin #Username').val(), $('#frmLogin #Password').val());
        event.preventDefault();
    });


    $('#frmLogout').submit(function (event) {
        logoutUser();
        event.preventDefault();
    });
</script>

</body>
</html>